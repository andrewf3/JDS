function clearOutput(){$(".testdome-verifyconsole, .testdome-outputconsole").html("")}TESTDOME=TESTDOME||{},TESTDOME.questionDetailsBundleLoaded=!0,$(function(){var h,f=$("#Seed").data("name"),p=$("#SubmitUrl").data("name"),T=!1,s=!!$("#SolveQuestionView").data("name"),g="",c=(new Date).getTime();function t(){return $("#Comments").val()&&50<=$("#Comments").val().length}function e(){t()?$("#SubmitFeedback").removeAttr("disabled"):$("#SubmitFeedback").attr("disabled","disabled")}TESTDOME.page.startQuestionDetails=function(){function d(){T=!1,TESTDOME.utilities.enableElement(".testdome-verify"),TESTDOME.utilities.enableElement(".testdome-finish")}function o(e,t,i){if(T)return!1;h=(new Date).getTime();var n=i.closest(".testdome-questiondetails"),a=$(n.find(".testdome-verifyconsole")[0]),o=$(n.find(".testdome-outputconsole")[0]),s=m(n);s&&(a.html(TESTDOME.question.evaluatingMessage),o.html(TESTDOME.question.evaluatingMessage)),T=!0,TESTDOME.utilities.disableElement(".testdome-verify"),TESTDOME.utilities.disableElement(".testdome-finish");var r=u(t,i),l={id:e,seed:f,value:r,captchaValidationToken:$("#g-recaptcha-response").val(),saveAnswer:!0,candidateKey:g,secondsOpened:parseInt(((new Date).getTime()-c)/1e3)};s&&TESTDOME.utilities.scrollToElement($(n.find(".testdome-scoredescription")[0]));TESTDOME.utilities.callAjax(p,l,function(e){var t,i=(new Date).getTime()-h;isNaN(i)&&(i=0),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"QuestionVerify",QuestionType:TESTDOME.utilities.getQuestionTypeShortName(n.data("questiontype")).toLowerCase(),QuestionID:n.data("questionid"),QuestionTiming:i}),d(),(t=e).Submitted?(g=t.CandidateKey,s&&TESTDOME.question.parseValidationResult(t,a,o,Number(n.data("questiontype"))),t.CaptchaNeeded?($("#CaptchaContainer").appendTo($(".captcha-wrapper")),$("#CaptchaContainer").not(":visible")&&(null==t.Result&&a.html(""),grecaptcha.reset(),a.show(),$("#CaptchaContainer").show())):$("#CaptchaContainer").hide(),t.CaptchaWrong?a.html('<p class="verify-console-main-message font-danger">Captcha solution is not correct. Try again.</p>'):$("#CaptchaContainer").hide(),TESTDOME.page.validationResultCallback&&TESTDOME.page.validationResultCallback(t,n)):(a.html('<p class="verify-console-main-message font-danger">Error validating question. Try again.</p>'),o.html('<p class="verify-console-main-message font-danger">Error validating question. Try again.</p>'))},function(e){d(),a.html('<p class="verify-console-main-message font-danger">Error validating question. Try again.</p>'),o.html('<p class="verify-console-main-message font-danger">Error validating question. Try again.</p>')},{retryCallback:function(){a.html(TESTDOME.question.retryingMessage)},timeout:$("#CodeTimeout").data("name")})}function e(){TESTDOME.page.enableControls()}function u(e,t){return TESTDOME.page.getAnswer(e,t)}var c=(new Date).getTime();function m(e){return 4==e.data("questiontype")||5==e.data("questiontype")}hljs.initHighlightingOnLoad(),TESTDOME.question.initializePage({disableControls:function(){TESTDOME.page.disableControls()},enableControls:function(){e()},getAnswer:function(e,t){u(e,t)}},!0),$(window).load(function(){$(".testdome-environmentinfo").popover({content:function(){return $(this).data("title")},placement:"auto",trigger:"hover",title:"",html:!0,container:"body",delay:50})}),$(".testdome-questiondetails").each(function(){var i=$(this);if(!0!==i.data("initialized")){var n=Number(i.data("questiontype")),a=m(i);!s&&a&&$(i.find(".testdome-finish")[0]).attr("value","Close"),$(i.find(".testdome-reportquestionproblem")[0]).attr("href","mailto:"+testDomeDecode("eaSSUHI@IpeIxUqp.YUq","xFo4pEHyNw5YZXKVq0BO32UnSgstMWiu9PjDJQAv7TdLRleIrCzahcfGb1m8k6")+"?subject=Report question: "+window.location.href+", QuestionId: "+i.data("questionid")),$(i.find(".testdome-finish")[0]).click(function(){if(!s&&a)close();else if(3===n){var e="<label>Reference solution</label> (compare with yours to see where you might be able to improve):<br/>",t=$(i.find(".testdome-reference-solution")).html();t&&0<t.length?e+=t:e+="Reference solution not available",$(i.find(".testdome-scoredescription")[0]).html(e)}else 8!==n&&o(i.data("questionid"),n,$(this))}),i.data("initialized",!0)}}),$(".container").find(".dropdown-menu").find("a").on("click",function(e){var t=$(this).attr("href"),i=TESTDOME.utilities.getQueryParams(t),n=TESTDOME.utilities.getURLParameter(i,"testId");if(null!=TESTDOME.utilities.getURLParameter(i,"questionId")&&null!=n)return e.preventDefault(),window.location=t,!1}),e(),$(".testdome-verify").click(function(){var e=$(this).closest(".testdome-questiondetails");if(m(e)){var t=$(this);$(t.find(".testdome-verifyconsole")[0]).text(""),o(e.data("questionid"),e.data("questiontype"),t)}else $(e.find(".testdome-scoredescription")[0]).html("")}),$("#FacebookShare,#LinkedInShare,#TwitterShare,#ShareByEmail,#GooglePlusShare").click(function(){$("#ChallengeOptions").dropdown("toggle")}),$(".truncated").popover({content:function(){if($(this).data("content")!=$(this).html())return $(this).data("content")},placement:TESTDOME.utilities.determinePopupPlacement,trigger:"hover",container:"body",delay:50}),$(".edit-question").popover({content:function(){if($(this).data("content")!=$(this).html())return $(this).data("content")},placement:function(e,t){var i=$(t).offset();return $(window).width()-i.left<200?"left":"top"},trigger:"hover",title:"",container:"body",delay:50})},TESTDOME.page.startQuestionDetails(),s&&($(".testdome-showhint").show(),s&&$(".testdome-questiondetails").each(function(){var n,a;function r(){n&&clearInterval(n)}var l=$(this),d=$(l.find(".testdome-showhint")[0]);function u(e,t){var i;d.attr("disabled","disabled"),a=t?new Date($.now()):new Date($.now()+12e4+900),i=e,r(),n=setInterval(i,1e3),e()}var e=function(o){var s=0<$(l.find(".testdome-hint"+(o+1))[0]).length?function(){e(o+1)}:function(){return d.hide(),!1};0<$(l.find(".testdome-hint"+o)[0]).length?function(e,t){var i=$.now();if(i+1e3<a){var n=TESTDOME.utilities.getTimeSpanFromTime(a-i);d.val(e+" ("+TESTDOME.utilities.displayTimeSpan(n)+")")}else r(),d.val(e),d.removeAttr("disabled"),t()}("Show Hint",function(){d.unbind().click(function(){var e=$(l.find(".testdome-hintsconsole")[0]),t=e.html();t+="<p>Hint "+(o+1)+": "+$(l.find(".testdome-hint"+o)[0]).data("name")+"</p>",e.html(t);var i=Number(l.data("questiontype"));4==i||5==i?($(l.find(".testdome-hintstab")[0]).tab("show"),e.animate({scrollTop:e.prop("scrollHeight")},500)):(TESTDOME.utilities.scrollToElement(e),!e.next().is("hr")&&0<$(l.find(".testdome-scoredescription")[0]).html().length&&e.after("<hr/>"));var n=l.data("questionid"),a=(new Date).getTime()-c;return isNaN(a)&&(a=0),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"QuestionHint",QuestionType:TESTDOME.utilities.getQuestionTypeShortName(l.data("questiontype")).toLowerCase(),QuestionID:n,HintCount:"Hint"+(o+1),HintTiming:a}),u(s),$(this).blur(),!1})}):u(s)};u(function(){e(0)},!0)})),TESTDOME.utilities.turnOnChartPopup("","right"),TESTDOME.page.validationResultCallback=function(e,a){var o=$(a.find(".testdome-scoredescription")[0]);var t=TESTDOME.utilities.formatDecimal(100*e.Result.PartialScore,0);o.text(function(e){if(e<0||100<e)return!1;var t;o.empty(),t=e<40?"Your score is "+e+"% :(":e<100?"Your score is "+e+"%, nice!":"Your score is 100%, perfect!";var i=$("#ShowSharingControl").data("name");i&&(t+=function(e){function t(e){return $("#TwitterShareUrl").val()+encodeURIComponent(e+"@")}function i(){return $("#GooglePlusShareUrl").val()}return e<40?($("#TwitterShare").attr("href",t($("#DialogMessage0").val())),$("#GooglePlusShare").attr("href",i()),$("#ShareByEmail").data("body","Do you know how to solve this?%0A%0A"),$("#ChallengeOptions").html('Ask a friend for help <span class="caret"></span>'),"<br/><br/>Roll up your sleeves or &nbsp;"):e<100?($("#TwitterShare").attr("href",t($("#DialogMessage50").val().replace("{0}",e))),$("#GooglePlusShare").attr("href",i()),$("#ShareByEmail").data("body","I solved this problem "+e+"%25 correct. Do you know how to make it a perfect 100%25?%0A%0A"),$("#ChallengeOptions").html('Ask a friend for help <span class="caret"></span>'),"<br/><br/>Give it one last push or &nbsp;"):($("#TwitterShare").attr("href",t($("#DialogMessage100").val())),$("#GooglePlusShare").attr("href",i()),$("#ShareByEmail").data("body","Just got a perfect 100%25! Can you match my score? :)%0A%0A"),$("#ChallengeOptions").html('Challenge friends to match your score <span class="caret"></span>'),"<br/><br/>Competition is fun! Especially when you know you'll win. :) &nbsp;")}(e)),o.html(t);var n=$(a.find(".testdome-hintsconsole")[0]);n.html()&&0<n.html().trim().length&&!n.next().is("hr")&&n.after("<hr/>"),i&&o.append($("#SharingControl > .dropdown, .dropup").clone(!0))}(t)),TESTDOME.utilities.scrollToElement(o,80)},TESTDOME.page.refreshFavoriteIcons(),e(),$("#Comments").bind("input propertychange",function(){e()}),$("#SubmitFeedback").click(function(){if(!t())return!1;$("#Comments,#SubmitFeedback").attr("disabled","disabled");var e={questionId:$("#QuestionId").data("name"),note:$("#Comments").val()};return TESTDOME.utilities.callAjax($("#SubmitFeedbackUrl").data("name"),e,function(){window.location.reload(!0)},function(e){TESTDOME.adminUI.showFloatingMessage("Error occured while sending feedback. Please refresh the page to try again!",!0)}),!1}),$(".alert-dismissable").find(".close").click(function(){0<=$(this).parent().html().indexOf("You will receive $50 in Testdome credits for your review")&&(document.cookie=$("#QuestionFeedbackDismissedCookie").data("name")+"=1;path=/;")})});
//# sourceMappingURL=maps/bundles/question-details.js.map
